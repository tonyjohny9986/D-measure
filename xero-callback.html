<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Xero Connected - Decovibes</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f6f1e7;
    color: #3b2f2f;
    text-align: center;
    padding: 60px;
  }
  .box {
    background: #ffffff;
    border-radius: 12px;
    padding: 40px;
    max-width: 500px;
    margin: auto;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  }
  h1 {
    color: #8b6f3d;
  }
</style>
</head>
<body>

<div class="box">
  <h1>Connecting to Xero...</h1>
  <p>Please wait while we complete the connection.</p>
</div>

<script>
  // Read tokens from URL fragment
  const params = new URLSearchParams(window.location.hash.substring(1));
  const accessToken = params.get("access_token");
  const refreshToken = params.get("refresh_token");
  const expiresIn = params.get("expires_in");

  if (accessToken) {
    // Save tokens locally (used by your quoting system)
    localStorage.setItem("xero_access_token", accessToken);
    localStorage.setItem("xero_refresh_token", refreshToken);
    localStorage.setItem("xero_expires_in", expiresIn);

    document.querySelector(".box").innerHTML =
      "<h1>Xero Connected Successfully</h1><p>You can now close this window.</p>";
  } else {
    document.querySelector(".box").innerHTML =
      "<h1>Connection Failed</h1><p>Please try connecting again.</p>";
  }
</script>

</body>
</html>
